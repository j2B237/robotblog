{% extends "base.html" %}
{% block title %}Recherche â€“ RobotJournal{% endblock %}
{% block content %}
<main>
  <div class="section-header" style="padding-top:1rem;">
    <h1 class="section-title">ğŸ” Recherche</h1>
    {% if q %}<p class="section-sub">{{ articles|length }} rÃ©sultat(s) pour Â« <strong>{{ q }}</strong> Â»</p>{% endif %}
  </div>
  <form action="{{ url_for('recherche') }}" method="get" style="display:flex;gap:0.75rem;margin-bottom:2rem;">
    <input type="search" name="q" value="{{ q }}" placeholder="Rechercher dans le journal..." 
           style="flex:1;background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:0.75rem 1rem;color:var(--text);font-size:1rem;outline:none;">
    <button type="submit" class="btn btn-primary">Rechercher</button>
  </form>
  {% if articles %}
    <div style="display:flex;flex-direction:column;gap:1rem;">
      {% for art in articles %}
        <div class="card" style="display:grid;grid-template-columns:auto 1fr;gap:1rem;align-items:center;">
          {% if art.image_couverture %}
            <img src="{{ url_for('static', filename='uploads/' + art.image_couverture) }}" style="width:80px;height:80px;object-fit:cover;border-radius:8px;" alt="">
          {% else %}
            <div style="width:80px;height:80px;background:var(--bg3);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:2rem;">ğŸ“–</div>
          {% endif %}
          <div class="card-body" style="padding:0.75rem;">
            {% if art.jour %}<span class="badge badge-day" style="margin-bottom:0.4rem;">J{{ art.jour }}</span>{% endif %}
            <div class="card-title"><a href="{{ url_for('article', slug=art.slug) }}">{{ art.titre }}</a></div>
            {% if art.resume %}<p class="card-resume">{{ art.resume[:100] }}â€¦</p>{% endif %}
            <div class="card-meta">{{ art.date_publication|date_fr }}</div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% elif q %}
    <div style="text-align:center;padding:3rem;color:var(--text-muted);">
      <div style="font-size:3rem;margin-bottom:1rem;">ğŸ”</div>
      <p>Aucun rÃ©sultat pour Â« {{ q }} Â». Essayez d'autres mots-clÃ©s.</p>
    </div>
  {% endif %}
</main>
{% endblock %}
